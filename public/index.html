<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="description" content="Profil et page personnelle de Mickaël Marchal, CTO et développeur full-stack chez Grand Luxury Group.">
  <meta name="author" content="Mickaël Marchal">
  <link rel="icon" href="favicon.png">

  <title>Mickaël Marchal, CTO + full stack geek</title>

  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link href="styles.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Raleway:900|Yanone+Kaffeesatz:700" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="font-awesome-animation.min.css">
  
</head>

<body>

  <nav class="nav-main">
    <a class="js-nav-menu-btn nav-menu-btn">
      <span class="fa fa-bars"></span>
    </a>
    <ul class="js-nav-menu nav-menu">
      <li>
        <a href="#profile" class="js-nav-link js-nav-link-profile">Profil</a>
      </li>
      <li>
        <a href="#publications" class="js-nav-link js-nav-link-publications">Publications</a>
      </li>  
      <li>
        <a href="#social" class="js-nav-link js-nav-link-social">Activité</a>
      </li>
      <li class="language">
        <a href="">English</a>
      </li>
    </ul>
  </nav>

  <header class="header" id="js-header">
    <div class="header-title" id="js-header-title">
      <h1>Mickaël Marchal</h1>
    </div>
  </header>

  <div class="main">

    <div class="cv-overview js-nav-profile container" id="profile">
      <div class="row" >
        <div class="col-md-5">
          <img src="webdev.jpg" class="cv-overview-image">
        </div>
        <div class="col-md-7">
          <h1>CTO + full stack geek
            <div class="subtitle">@Grand Luxury Group.</div>
          </h1>
          <p>Premier salarié chez
            <a href="#" data-toggle="modal" data-target="#glg-details">Grand Luxury Group</a> et unique dev durant 5 ans &bull; Conception et réalisation de la platorme e-commerce
            de la société &bull; Optimisation des performances et du taux de conversion &bull; Product Owner et référent
            métier.
          </p>
          <p>
            <strong>Aujourd'hui je dirige l'équipe R&amp;D et pilote la stratégie tech de l'entreprise, sans jamais avoir abandonné
              mon rôle d'architecte et de développeur full-stack.</strong>
          </p>

          <p class="cv-overview-cta">
            <a href="" class="btn btn-primary btn-arrow" data-toggle="modal" data-target="#js-contact-modal">
              <span>Me contacter</span>
            </a>
            <a class="btn btn-default" href="/cv/marchal_mickael_cv_fr_web.pdf">Télécharger mon CV</a>
            <a class="btn btn-default linked-in" href="https://www.linkedin.com/in/mickaelmarchal/">Profil LinkedIn</a>
          </p>
        </div>
      </div>
    </div>

    <div class="cv-details jumbotron">
      <div class="container">
        <div class="row">
          <div class="col-md-3"></div>

          <div class="col-md-9">
            <h4>Dev, Architecte, Ops, PO, Manager et CTO</h4>
            <h2>Une approche complète des projets web.</h2>
            <p class="subtitle">Mon profil hybride me permet de
              <strong>mettre les outils les plus performants au service de la création de valeur et du succès d'un produit</strong>.</p>

            <p class="cv-techs">Dev Back :
              <span>Symfony 3</span>
              <span>PHP 7</span>
              <span>Express</span>
              <span>Node.js</span>
              <span>MySQL</span>
              <span>MongoDB</span>
              <span>
                <abbr title="Global Distribution System">GDS</abbr> et Booking engine</span>
            </p>
            <p class="cv-techs">Dev Front :
              <span>Angular 5 + Universal</span>
              <span>Typescript</span>
              <span>Javascript/ES2017</span>
              <span>Sass</span>
              <span>Ionic + Cordova</span>
              <span>
                <abbr title="Accelerated Mobile Pages">AMP</abbr>
              </span>
            </p>
            <p class="cv-techs">Architecture :
              <span>RESTful APIs</span>
              <span>Redux</span>
              <span>Reactive Programming</span>
              <span>
                <abbr title="Single Page Applications, Progressive Web Apps">SPAs et PWAs</abbr>
              </span>
              <span>Caching et CDN</span>
            </p>
            <p class="cv-techs">Qualité :
              <span>Scrum Master</span>
              <span>Tests unitaires</span>
              <span>Jenkins</span>
              <span>Gitlab + Gitlab CI</span>
            </p>
            <p class="cv-techs">Opérations :
              <span>Docker</span>
              <span>Google Cloud Platform</span>
              <span>Debian</span>
              <span>Apache</span>
              <span>Bash</span>
            </p>
            <p class="cv-techs">Produit et métier :
              <span>UX Design</span>
              <span>
                <abbr title="Conversion Rate Optimization">CRO</abbr>
              </span>
              <span>
                <abbr title="Search Engine Optimisation">SEO</abbr>
              </span>
              <span>Product Owner</span>
              <span>Analytics</span>
            </p>
            <p class="cv-techs">Management :
              <span>Conduite de projet in-house/offshore</span>
              <span>Recrutement</span>
              <span>Gestion d'équipe</span>
            </p>

            <div class="cv-contact-cta">
              <!-- <p>Je cherche à élargir mes horizons et relever d'autres défis dans une nouvelle structure.<br />
          Echangeons ensemble et voyons comment je peux contribuer à la réussite de vos projets ! </p>-->

              <p>
                <a href="" class="btn btn-primary btn-arrow" data-toggle="modal" data-target="#js-contact-modal">
                  <span>Me contacter</span>
                </a>
                <a class="btn btn-default" href="/cv/marchal_mickael_cv_fr_web.pdf">Télécharger mon CV</a>
                <a class="btn btn-default" href="https://www.linkedin.com/in/mickaelmarchal/">Profil LinkedIn</a>
              </p>
            </div>

          </div>
        </div>
      </div>
    </div>

    <div class="modal fade" tabindex="-1" role="dialog" id="glg-details">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h3 class="modal-title">Grand Luxury Group</h3>
          </div>
          <div class="modal-body">
            <p>Crée en 2007, Grand Luxury Group est le spécialiste européen du voyage de luxe sur internet : La société propose
              la réservation de 450 hôtels d'exception à travers le monde.</p>
            <ul>
              <li>Les plus beaux hôtels du monde, triés sur le volet.</li>
              <li>Un service personnalisé via un conseiller dédié.</li>
              <li>Des avantages exclusifs pour les membres du L Club.</li>
              <li>Un suivi attentif de chaque client dès la réservation.</li>
              <li>Partenaire des plus grands chaînes hôtelières du monde.</li>
            </ul>
            <p>
              <strong>En 10 ans, et en s'appuyant sur sa plateforme technique, Grand Luxury est devenu le 2
                <sup>ème</sup> apporteur d'affaires mondial pour les hôtels de Paris, Londres et Milan &mdash; avec seulement
                60 salariés.</strong>
            </p>
            <p>On en parle sur :
              <a href="https://www.forbes.fr/luxe/grand-luxury-hotels-une-nouvelle-idee-du-luxe/">Forbes</a> |
              <a href="http://bfmbusiness.bfmtv.com/mediaplayer/video/le-rendez-vous-du-luxe-grand-luxury-hotels-un-site-de-reservation-d-hotels-selectif-1809-982037.html">BFM Business</a>
            </p>
            <p>
              <a href="https://fr.grandluxuryhotels.com">Visiter Grand Luxury Hotels</a>
            </p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Fermer</button>
          </div>
        </div>
        <!-- /.modal-content -->
      </div>
      <!-- /.modal-dialog -->
    </div>

    <div class="js-nav-publications container" id="publications">
        
      <h2>Articles &amp; publications</h2>

      <div class="row">

        <div class="col-sm-4 publication">
          <img src="http://via.placeholder.com/350x200" width="350" height="200">
          <h3>GL Extranet</h3>
          <p>Angular4 Symfony3 PWAs</p>
          <a href="" class="btn btn-default">More details</a>
        </div>

        <div class="col-sm-4 publication">
          <img src="http://via.placeholder.com/350x200" width="350" height="200">
          <h3>Google AMP Hackhathon</h3>
          <p>Angular4 Symfony3 PWAs</p>
          <a href="" class="btn btn-default">More details</a>
        </div>

        <div class="col-sm-4 publication">
            <img src="http://via.placeholder.com/350x200" width="350" height="200">
            <h3>Google AMP Hackhathon</h3>
            <p>Angular4 Symfony3 PWAs</p>
            <a href="" class="btn btn-default">More details</a>
          </div>
  
      </div>

      <div class="row">

        <div class="col-sm-4 publication">
          <img src="http://via.placeholder.com/350x200" width="350" height="200">
          <h3>Grand Luxury Hotels</h3>
          <p>ZendFramework MySQL jQuery CSS3 HTML5 AMP</p>
          <a href="" class="btn btn-default">More details</a>
        </div>

        <div class="col-sm-4 publication">
          <img src="http://via.placeholder.com/350x200" width="350" height="200">
          <h3>Grand Luxury E-butler</h3>
          <p>Ionic Framework Angular1 Cordova</p>
          <a href="" class="btn btn-default">More details</a>
        </div>

        <div class="col-sm-4 publication">
            <img src="http://via.placeholder.com/350x200" width="350" height="200">
            <h3>Grand Luxury E-butler</h3>
            <p>Ionic Framework Angular1 Cordova</p>
            <a href="" class="btn btn-default">More details</a>
          </div>
  
      </div>

    </div>
        
    <hr />

    <div class="js-nav-social container" id="social">

      <div class="row">
        <div class="col col-md-10">

          <h2>Activité récente</h2>
          <div class="js-feed-placeholder feed"></div>
        </div>
        <div class="col col-md-2">

          <h3 class="feed-source-title">Retrouvez-moi sur...</h3>

          <div class="feed-source">
            <div class="feed-icon medium"><span class="fa fa-medium"></span></div>            
            <h3>Medium</h3>
            <p>
              <a href="https://medium.com/@mickaelmarchal">@mickaelmarchal</a>
            </p>
            <!-- <ul>
              <li>5 stories</li>
              <li>5 followers</li>
            </ul>-->
          </div>

          <div class="feed-source">
            <div class="feed-icon github"><span class="fa fa-github"></span></div>  
            <h3>Github</h3>
            <p>
              <a href="https://github.com/mickaelmarchal">@mickaelmarchal</a>
            </p>
            <!-- <ul>
              <li>10 repositories</li>
              <li>5 stars</li>
              <li>130 commits</li>
           </ul>-->
          </div>

          <div class="feed-source">
            <div class="feed-icon instagram"><span class="fa fa-instagram"></span></div>            
            <h3>Instagram</h3>
            <p>
              <a href="https://www.instagram.com/mickamarchal/">@mickamarchal</a>
            </p>
            <!-- <ul>
              <li>5 stories</li>
              <li>5 followers</li>
            </ul>-->
          </div>

          <div class="feed-source">
            <div class="feed-icon pocket"><span class="fa fa-get-pocket"></span></div>            
            <h3>Pocket</h3>
            <p>
              <a href="https://getpocket.com/@mickaelmarchal">@mickaelmarchal</a>
            </p>
            <!-- <ul>
              <li>5 stories</li>
              <li>5 followers</li>
            </ul> -->
          </div>

          <div class="feed-source">
            <div class="feed-icon stackoverflow"><span class="fa fa-stack-overflow"></span></div>
            <h3>StackOverflow</h3>
            <p>
              <a href="https://stackoverflow.com/users/6403849/micka%c3%abl-marchal?tab=profile">@mickaelmarchal</a>
            </p>
            <!-- <ul>
              <li>16 reputation</li>
              <li>5 answers</li>
              <li>5 badges earned</li>
            </ul> -->
          </div>

        </div>

      </div>

    </div>

    <div class="modal fade" id="js-contact-modal" tabindex="-1" role="dialog" aria-labelledby="contact-form-title">
      <div class="modal-dialog" role="document">
        
        <div class="modal-content hidden" id="js-contact-form-loading">
          <div class="modal-header">
            <h3 class="modal-title">Envoi en cours...</h3>
          </div>
          <div class="modal-body">
            <p class="contact-loading">
              <span class="fa faa-shake animated fa-envelope-o" aria-hidden="true"></span>
              Veuillez patienter quelques instants.
            </p>
          </div>
        </div>

        <div class="modal-content hidden" id="js-contact-form-error">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h3 class="modal-title">Oups.</h3>
          </div>
          <div class="modal-body">
              <p class="contact-error">
                <span class="fa fa-times" aria-hidden="true"></span>
                Votre message n'a pu être envoyé, une erreur s'est produite.
                Mais vous pouvez également me
                <a href="https://www.linkedin.com/in/mickaelmarchal/">contacter via LinkedIn</a> ;).
              </p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Fermer</button>
          </div>
        </div>

        <div class="modal-content hidden" id="js-contact-form-success">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h3 class="modal-title">C'est fait !</h3>
          </div>
          <div  class="modal-body">
            <p class="contact-success">
              <span class="fa faa-vertical animated fa-thumbs-o-up" aria-hidden="true"></span>
              Votre message a bien été envoyé, merci d'avoir pris le temps de me contacter.
            </p>
            <p></p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Fermer</button>
          </div>
        </div>

        <div class="modal-content" id="js-contact">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h3 class="modal-title" id="contact-form-title">Me contacter</h3>
          </div>
          
          <form action="/send-message" method="post" id="js-contact-form">
            <div class="modal-body">
              <p>Vous pouvez également me
                <a href="https://www.linkedin.com/in/mickaelmarchal/">contacter via LinkedIn</a>.</p>
              
              <div class="form-group">
                <label for="name">Votre nom</label>
                <input type="text" class="form-control" id="name" required placeholder="Elon Musk">
              </div>

              <div class="form-group">
                <label for="email">Votre e-mail</label>
                <input type="email" class="form-control" id="email" required placeholder="elon@space-x.com">
              </div>

              <div class="form-group">
                <label for="message">Votre message</label>
                <textarea class="form-control" id="message" required placeholder="Votre message ici."></textarea>
              </div>
                  
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Fermer sans envoyer</button>
              <button type="submit" class="btn btn-primary">Envoyer</button>
            </div>
          </form>  
        </div>
      </div>
    </div>


    <hr class="separator">

    <div class="container">
      <footer>
        <p>&copy; 2001-2017 Mickaël Marchal. Tous droits réservés. &mdash; <a id="js-show-legal-terms" href="#legal-terms">Mentions légales</a></p>
        <div class="legal-terms hidden" id="legal-terms">
          <p>Site hébergé par Gandi.net - 63-65 boulevard Masséna 75013 Paris - Tel +33 (0) 1 70.37.76.61</p>
          <p>Ce site utilise les projets open-source
            <a href="https://getbootstrap.com" rel="nofollow">Bootstrap</a>,
            <a href="http://fontawesome.io" rel="nofollow">Font Awesome</a>,
            <a href="https://jquery.com" rel="nofollow">jQuery</a>,
            <a href="https://momentjs.com" rel="nofollow">moment.js</a>,
            <a href="https://piwik.org" rel="nofollow">Piwik</a>,
            <a href="https://github.com/alykoshin/gmail-send" rel="nofollow">Gmail-send</a>,
            <a href="http://l-lin.github.io/font-awesome-animation" rel="nofollow">Font Awesome animation</a>.
          </p>
        </div>  
      </footer>
    </div>

  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.19.1/moment.min.js" integrity="sha256-zG8v+NWiZxmjNi+CvUYnZwKtHzFtdO8cAKUIdB8+U9I=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.19.1/locale/fr.js" integrity="sha256-DJpVvSniFq7HyHLFi3n3thaGrgI4XiEsDnQwyY3BnIo=" crossorigin="anonymous"></script>

  <script>
    var $header = $('#js-header'),
      $body = $(document.body),
      $html = $('html'),
      $headerTitle = $('#js-header-title'),
      $headerH1 = $('#js-header-title h1');

    // ranges for header animation
    var animateRange = { start: 30, end: 340 },
      headerHeight,
      headerTitleBottom, headerTitleAngle, headerTitleHeight,
      headerH1Scaling, headerH1Top,
      socialOffset, publicationsOffset;

    $(window).resize(function () {

      // Get scroll position for sections
      socialOffset = $(".js-nav-social").first().offset().top;
      publicationsOffset = $(".js-nav-publications").first().offset().top;

      // Change animation settings and state of nav menu
      if ($(this).width() >= 1120) {
        animateRange = { start: 10, end: 340 };
        headerHeight = { start: 440, end: 55 };
        headerTitleBottom = { start: -120, end: -15 };
        if ($(this).width() > 1920) {
          headerTitleAngle = { start: -5, end: 0 };
        } else {
          headerTitleAngle = { start: -7, end: 0 };  
        }
        headerTitleHeight = { start: 240, end: 0 };
        headerH1Scaling = { start: 1, end: 0.2 };
        headerH1Top = { start: -107, end: -107 };

        $('.js-nav-menu-btn').removeClass('active');
        $('.js-nav-menu').show();

      } else if ($(this).width() >= 750) {
        animateRange = { start: 15, end: 200 };
        headerHeight = { start: 300, end: 55 };
        headerTitleBottom = { start: -120, end: -3 };
        headerTitleAngle = { start: -7, end: 0 };
        headerTitleHeight = { start: 240, end: 0 };
        headerH1Scaling = { start: 1, end: 0.3 };
        headerH1Top = { start: -72, end: -72 };

        $('.js-nav-menu-btn').removeClass('active');
        $('.js-nav-menu').hide();

      } else {
        animateRange = { start: 10, end: 120 };
        headerHeight = { start: 150, end: 55 };
        headerTitleBottom = { start: -240, end: -5 };
        headerTitleAngle = { start: -7, end: 0 };
        headerTitleHeight = { start: 300, end: 0 };
        headerH1Scaling = { start: 1, end: 0.4 };
        headerH1Top = { start: -45, end: -58 };

        $('.js-nav-menu-btn').removeClass('active');
        $('.js-nav-menu').hide();
      }

      $(window).trigger('scroll');

    }).trigger('resize');


    function interpolate(range, scrollRatio) {
      if (scrollRatio <= 0) {
        return range.start;
      } else if (scrollRatio >= 1) {
        return range.end;
      } else {
        return range.start + ((range.end - range.start) * scrollRatio);
      }
    }

    // Handle animations on scroll
    $(window).scroll(function () {

      // 1. Handle header animation on scroll
      var scrollTop = $body.scrollTop() || $html.scrollTop();
      var scrollRatio = (scrollTop - animateRange.start) / (animateRange.end - animateRange.start);

      $header.css({
        height: interpolate(headerHeight, scrollRatio) + 'px'
      });
      $headerTitle.css({
        transform: 'rotate(' + interpolate(headerTitleAngle, scrollRatio) + 'deg)',
        height: interpolate(headerTitleHeight, scrollRatio) + 'px',
        bottom: interpolate(headerTitleBottom, scrollRatio) + 'px'
      });
      $headerH1.css({
        transform: 'scale(' + interpolate(headerH1Scaling, scrollRatio) + ',' + interpolate(headerH1Scaling, scrollRatio) + ')',
        top: interpolate(headerH1Top, scrollRatio)
      });

      // 2. Handle hilighting of menu items on scroll
      if (scrollTop > socialOffset - 40) {
        $('.js-nav-link').removeClass('active');
        $('.js-nav-link-social').addClass('active');
      } else if (scrollTop > publicationsOffset - 80) {
        $('.js-nav-link').removeClass('active');
        $('.js-nav-link-publications').addClass('active');
      } else if (scrollTop > 350) {
        $('.js-nav-link').removeClass('active');
        $('.js-nav-link-profile').addClass('active');
      } else {
        $('.js-nav-link').removeClass('active');
      }
    }).trigger('scroll');

    // Feed builders
    var feedBuilders = {
      pocketAdd: function (data) {
        
        var html = '<h3>' + data.title + '</h3>';
        if(data.excerpt) {
          html += '<p>' + data.excerpt + '</p>';
        }
        if(data.tags.length) {
          html += '<p class="tags">';
          for(var i = 0; i < data.tags.length; i++) {
            html += '<span><span class="fa fa-circle-o"></span> ' + data.tags[i];
          }
          html += '</p>';
        }
        
        return {
          icon: 'get-pocket',
          className: 'pocket',
          action: 'marque-page ajouté à pocket',
          html: html
        };
      },

      githubPush: function (data) {

        var html = '<h3>Push dans la branche ' + data.branch + ' de ' + data.repoName + '</h3>';
        for (var i = 0; i < Math.min(3, data.messages.length); i++) {
          html += '<p class="commit">' + data.messages[i] + '</p>';
        }
        if (data.messages.length > 3) {
          html += '<p class="more">…et ' + (data.messages.length - 3) + ' de plus.</p>';
        }

        return {
          icon: 'github',
          className: 'github',
          action: 'push de ' + data.messages.length + ' commit'
            + (data.messages.length > 1 ? 's' : '') + ' sur github.com',
          html: html
        };
      },

      githubCreate: function (data) {
        return {
          icon: 'github',
          className: 'github',
          action: 'dépôt github.com crée',
          html: '<h3>Dépôt ' + data.repoName + ' crée</h3>'
        };
      },

      stackoverflowAnswer: function (data) {
        return {
          icon: 'stack-overflow',
          className: 'stackoverflow',
          action: 'réponse à une question stackoverflow',
          html: '<h3>Réponse à "' + data.questionTitle + '"</h3><p>' + data.answerDescription + '</p>'
        };
      },

      stackoverflowBadge: function (data) {
        return {
          icon: 'trophy',
          className: 'stackoverflow-badge',
          action: 'badge stackoverflow obtenu',
          html: '<h3>Bagde "' + data.badgeTitle + '" obtenu</h3><p>sur stackoverflow</p>'
        };
      },

      mediumArticle: function (data) {
        return {
          icon: 'medium',
          className: 'medium',
          action: 'nouvel article publié sur medium.com',
          html: '<h3>' + data.title + '</h3>'
        };
      },

      instagramPicture: function (data) {

        var html = '';
        data.images.forEach((image) => {
          
          var title = '';
          if(image.title) {
            title = image.title;
            if(image.location) {
              title += '<span class="location"><i class="fa fa-map-marker"></i> ' + image.location + '</span>';
            }
          } else if (image.location) {
            title = image.location;
          }
          if(title) {
            title = '<h3>' + title + '</h3>';
          }
        
          html += '<div class="instagram-picture">' + title
            + '<p><img src="' + image.url + '" width="' + Math.floor(image.width / 2) + '" height="' + Math.floor(image.height / 2) + '" alt="' + (image.location ? image.location : '') + '" /></p></div>';
        });

        return {
          icon: 'instagram',
          className: 'instagram',
          action: 'photo' + (data.images.length > 1 ? 's':'') + ' publiée' + (data.images.length > 1 ? 's':'') + ' sur instagram',
          html: html + '<div class="clearfix"></div>'
        };
      }
    };

    $(function () {

      // Manage nav menu button
      $('.js-nav-menu-btn').click(function (e) {
        e.stopPropagation();
        $(this).addClass('active');
        $('.js-nav-menu').show();
      });
      $(window).click(function () {
        if ($('.js-nav-menu-btn:visible').length) {
          $('.js-nav-menu-btn').removeClass('active');
          $('.js-nav-menu').hide();
        }
      });

      // Load feed
      try {
        $.getJSON('feed.json').then(function (data) {
          var feedItems = [];
          data.forEach(function (element) {
            if (typeof feedBuilders[element.type] != 'undefined') {
              feedItem = feedBuilders[element.type](element.data);
              feedItems.push(
                '<li class="feed-item js-feed-item">'
                + '<div class="feed-icon '+ feedItem.className +'"><span class="fa fa-' + feedItem.icon + '"></span></div>'
                + '<div class="date"><span title="'+(new Date(element.date)).toLocaleString()+'">' + moment(element.date).fromNow() + '</span>'
                + ' — ' + feedItem.action + '</div>'
                + feedItem.html
                + '</li>'
              );
            }
          }, this);
          if (feedItems.length) {
            $('.js-feed-placeholder').first().html('<ul><li class="feed-end"></li>'
              + feedItems.join('') + '<li class="feed-end hidden"></li></ul><a id="js-feed-show-all" class="feed-show-all">Afficher plus...</a>');
            $('.js-feed-item').slice(15).hide();

            // show all feed entries
            $("#js-feed-show-all").click(function() {
              $('.js-feed-item').show();
              $('.feed-end').removeClass('hidden');
              $(this).hide();
            });
          }

          // Update scroll position for sections
          socialOffset = $(".js-nav-social").first().offset().top;
          publicationsOffset = $(".js-nav-publications").first().offset().top;
        });
      } catch (e) {
        console.log(e);
      }

      // legal terms
      $("#js-show-legal-terms").click(function(e) {
        $(".legal-terms").toggleClass('hidden');
      });
      $(".legal-terms").addClass('hidden');


      // send message form
      $("#js-contact-form").submit(function(e) {
        e.preventDefault();

        $("#js-contact-form-loading").removeClass("hidden");
        $("#js-contact").addClass("hidden");

        $.post("/send-message", {
          name: $("#name").val(),
          email: $("#email").val(),
          message: $("#message").val()
        }).done(function(data) {
          if(data.success) {
            $("#js-contact-form-loading").addClass("hidden");
            $("#js-contact-form-success").removeClass("hidden");
            setTimeout(function() {
              $("#js-contact-modal").modal("hide");
            }, 3000);
          } else {
            $("#js-contact-form-loading").addClass("hidden");
            $("#js-contact-form-error").removeClass("hidden");
          }
        }).fail(function(err) {
          $("#js-contact-form-loading").addClass("hidden");
          $("#js-contact-form-error").removeClass("hidden");
        })
      });
      $("#js-contact-modal").on('show.bs.modal', function (e) {
        $("#js-contact-form-loading, #js-contact-form-error, #js-contact-form-success").addClass("hidden");
        $("#js-contact").removeClass("hidden");
      });
    });

  </script>

</body>

</html>